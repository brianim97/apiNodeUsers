<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <div class="row">
            <a href="https://eloquent-sherbet-f79228.netlify.app/login" class="text-center fw-bold">
               FRONT
            </a>
        </div>
    </div>
    <!-- <div class="d-flex justify-content-center mt-4">
        <script src="https://accounts.google.com/gsi/client" async defer></script>
        <div id="g_id_onload"
           data-client_id="133438523338-n36h8b8blcti5gd0p009h55arfuvgckt.apps.googleusercontent.com"
           data-callback="handleCredentialResponse"
           data-auto_prompt="false">
        </div>
        <div class="g_id_signin"
           data-type="standard"
           data-size="large"
           data-theme="outline"
           data-text="sign_in_with"
           data-shape="rectangular"
           data-logo_alignment="left">
        </div>
        <div id="signOutContainer">

        </div>
    </div>
    <script>
        const crearBotonSingOut = ()=>{
            if(!document.getElementById('google_signout')){
                let btn = document.createElement('button')
                    btn.textContent = 'Sign Out'
                    btn.classList.add('btn','border-dark')
                    btn.id = 'google_signout';
                    btn.addEventListener('click',()=>{
                        google.accounts.id.disableAutoSelect();
                        google.accounts.id.revoke(localStorage.getItem('mail'), done=>{
                            localStorage.clear();
                            location.reload();
                        })
                        
                    })
                    signOutContainer.appendChild(btn)

            }
        }

        let signOutContainer = document.getElementById('signOutContainer');
            if(localStorage.getItem('mail')){
                console.log('exist mail');
                
                    crearBotonSingOut();
            }

            
            function handleCredentialResponse(response) {
    
                //Google Token: ID_TOKEN
    
                const credentials = {id_token:response.credential};
                console.log('id_token:',response.credential);
                fetch('http://localhost:3001/api/auth/google',{
                    method:'POST',
                    headers:{
                        'Content-Type':'application/json'
                    },
                    body:JSON.stringify(credentials)
                })
                .then(res=>{
                    return res.json()
                })
                .then(res=>{
                    console.log(res)
                    localStorage.setItem('mail',res.user.mail)
                    localStorage.setItem('token',res.token)
                    crearBotonSingOut();
                })
                .catch(console.warn())
            }

             

        

           // decodeJwtResponse() is a custom function defined by you
           // to decode the credential response.
        //    const responsePayload = decodeJwtResponse(response.credential);
      
        //    console.log("ID: " + responsePayload.sub);
        //    console.log('Full Name: ' + responsePayload.name);
        //    console.log('Given Name: ' + responsePayload.given_name);
        //    console.log('Family Name: ' + responsePayload.family_name);
        //    console.log("Image URL: " + responsePayload.picture);
        //    console.log("Email: " + responsePayload.email);
      </script> -->
</body>
</html>